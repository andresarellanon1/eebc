<?xml version="1.0" encoding="UTF-8"?>
<odoo>
   
    <template id="report_analytics" name="Reporte de Materiales">    
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <t t-foreach="docs" t-as="doc">
                    
                    <style>
                        
                        p {
                            margin:0;
                            font-size: 12px;
                        }
                        
                        td, th {
                            font-size: 12px;
                        }
                        
                        tr {
                            background-color: transparent !important;
                        }
                        
                    </style>

                    <!-- Encabezado -->    

                    <div style="display: flex; justify-content: space-between;">
                        <div>
                            <strong><p>Cliente: <span t-esc="doc.partner_id.name"/></p></strong>
                            <strong><p>Proyecto: <span t-esc="doc.project_id.name"/></p></strong>
                        </div>
                        <div>
                            <strong><p>Cotizaci칩n: <span t-esc="doc.name"/></p></strong>
                            <strong><p>Fecha: <span t-esc="doc.date_order"/></p></strong>
                            <strong><p>Elabor칩:<span t-esc="doc.user_id.name"/></p></strong>
                        </div>
                    </div>

                    <div class="report-header text-center" style="border: 2px solid black; text-align: right;">
                        <p><strong>An치lisis de precios unitarios</strong></p>
                    </div>

                    <!--Fin de Encabezado-->

                    <!--Servicio-->
                    <t t-foreach="doc.order_line" t-as="line">
                        <t t-if="line.display_type != 'line_section'">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
        
                                <div style="width: 70%;">
                                    <div style="display: flex;">
        
                                        <div style="margin-right: 60px;">
                                            <p>Clave:</p>
                                        </div>
                                        
                                        <div style="text-align: left;">
                                            <p>Pendiente</p>
                                        </div>
        
                                    </div>
                                    
                                    <div style="margin-top: 10px;">
                                        <p><span t-esc="line.product_template_id.name"/></p>
                                    </div>
                                    
                                </div>
        
                                <div style="width: 30%; display: flex; justify-content: space-between">
        
                                    <div>
                                        <p>Unidad: </p>
                                        <p>Cantidad: </p>
                                        <p>Precio unitario: </p>
                                        <p>Total: </p>
                                    </div>
                                    
                                    <div style="text-align: right;">
                                        <p><span t-esc="line.product_uom.name"/></p>
                                        <p><span t-esc="line.product_uom_qty"/></p>
                                        <p><span t-esc="line.price_unit"/></p>
                                        <p><span t-esc="line.purchase_price"/></p>
                                    </div>
                                    
                                </div>
        
                            </div>
                    <!--Fin de Servicio-->

                    <!--Materiales-->
                            
                                <div style="width: 100%;">
                                    <table style="border-collapse: collapse;">
                                        <thead>
            
                                            <tr style="border-collapse: collapse;">
                                                <th style="width: 5%; border: 2px solid black;">C</th>
                                                <th style="width: 10%; border: 2px solid black; text-align: left">Clave</th>
                                                <th style="width: 45%; border: 2px solid black; text-align: left">Descripci칩n</th>
                                                <th style="width: 10%; border: 2px solid black;">Unidad</th>
                                                <th style="width: 10%; border: 2px solid black; text-align: right">Cantidad</th>
                                                <th style="width: 15%; border: 2px solid black; text-align: right">Costo Unitario</th>
                                                <th style="width: 15%; border: 2px solid black; text-align: right">Total</th>
                                            </tr>
            
                                        </thead>
            
                                        <tbody>
                                            
                                            <tr>
                                                <td colspan="7" style="font-weight: bold;">Materiales</td>
                                            </tr>
                                            
                                            <t t-foreach="doc.project_picking_lines" t-as="material">
                                                <t t-if="not stop">
                                                    
                                                    <t t-if="material.name == line.product_template_id.name">
                                                        <t t-if="not fill">
                                                            <t t-set="fill" t-value="True"/>
                                                        </t>
                                                        <t-else>
                                                            <t t-set="stop_loop" t-value="True"/>
                                                        </t-else>
                                                    </t>
                                                    
                                                    <t t-if="fill">
                                                        <t t-if="material.display_type != 'line_section'">
                                                            <tr>
                                                                <td> </td>
                                                                <td>Pendiente</td>
                                                                <td><span t-esc="material.product_id.name"/></td>
                                                                <td style="text-align: center"><span t-esc="material.product_id.uom_id.name"/></td>
                                                                <td style="text-align: right"><span t-esc="material.quantity"/></td>
                                                                <td style="text-align: right"><span t-esc="material.standard_price"/></td>
                                                                <td style="text-align: right"><span t-esc="material.subtotal"/></td>
                                                            </tr>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                            
                                         
                                            <tr style="border-top: 20px solid white;">
                                                <td colspan="6" style="font-weight: bold;">Total de materiales</td>
                                                <td style="text-align: right; font-weight: bold;">9,700.00</td>
                                            </tr>
                                             

                    <!--Fin de Materiales-->
                            
                    
                     <!--Mano de obra-->
        
                                        <tr style="border-top: 10px solid white;">
                                            <td colspan="6" style="font-weight: bold;">Mano de obra</td>
                                        </tr>
                                        <t t-foreach="doc.project_plan_lines.task_timesheet_id.task_time_lines" t-as="manoObra">  
                                            <t t-foreach="manoObra.task_timesheet_id.task_time_lines" t-as="horas">  
                                                <tr>
                                                    <td> </td>
                                                    <td>Pendiente</td>
                                                    <td><span t-esc="horas.description"/></td>
                                                    <td style="text-align: center">jor</td>
                                                    <td style="text-align: right">1.5000000</td>
                                                    <td style="text-align: right">1,000.00</td>
                                                    <td style="text-align: right">1,500.00</td>
                                                </tr>
                                            </t>
                                        </t>
                                        
                                        <tr style="border-top: 20px solid white;">
                                            <td colspan="6" style="font-weight: bold;">Total de Mano de obra</td>
                                            <td style="text-align: right; font-weight: bold;">1,500.00</td>
                                        </tr>
                              
                    <!--Fin de Mano de obra-->
                    
                    <!--Totales-->
                                        <tr>
                                            <td> </td>
                                            <td/>
                                            <td style="font-weight: bold;">Costo directo</td>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td style="text-align: right; font-weight: bold;">11,200.00</td>
                                        </tr>
                                    
                                        <tr>
                                            <td> </td>
                                            <td/>
                                            <td style="font-weight: bold;">Utilidad</td>
                                            <td/>
                                            <td/>
                                            <td style="text-align: right; font-weight: bold;">45.0000%</td>
                                            <td style="text-align: right; font-weight: bold;">5,040.00</td>
                                        </tr>
                                    
                                        <tr>
                                            <td> </td>
                                            <td/>
                                            <td style="font-weight: bold;">Precio unitario</td>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td style="text-align: right; font-weight: bold;">16,240.00</td>
                                        </tr>
                            
                                        <tr>
                                            <td> </td>
                                            <td/>
                                            <td style="font-weight: bold;">IVA (8.00%)</td>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td style="text-align: right; font-weight: bold;">1,299.20</td>
                                        </tr>
                                    
                                        <tr>
                                            <td> </td>
                                            <td/>
                                            <td style="font-weight: bold;">Total</td>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td style="text-align: right; font-weight: bold;">17,539.20</td>
                                        </tr>
                                        
                                        <tr>
                                            <td colspan="7" style="padding-top: 20px; font-weight: bold; text-align: center;">(* DIECISIETE MIL QUINIENTOS TRINTA Y NUEVE PESOS 20/100 MXN*)</td>
                                        </tr>
                    <!--Fin de Totales-->
                                        <tr style="border-top: 25px solid white;"/>
                                        <tr style="border-top: 2px solid black;">
                                            <td style="padding-bottom: 20px;"/>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </t>
            
            </t>
        </t>
    </tbody>
</table>