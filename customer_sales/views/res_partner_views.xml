<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.ui.view" id="customer_sales_res_partner_form_view">
        <field name="name">customer.sales.res.partner.form.view</field>
        <field name="model">res.partner</field>
        <field name="priority">36</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">

            <xpath expr="//group[@name='sale']" position="before">
                <group>
                    <field name="is_customer" invisible="not is_company" />
                    <field name="is_government" invisible="not is_customer" />
                </group>
            </xpath>

            <xpath expr="//field[@name='lang']" position="after">
                <field name="commercial_name" readonly="parent_id" />
                <field name="customer_number_reference" readonly="1" invisible="not is_customer" />
            </xpath>

            <xpath expr="//group[@name='sale']" position="attributes">
                <attribute name="invisible">not is_customer</attribute>
            </xpath>

            <xpath expr="//group[@name='sale']" position="after">
                <group name="customer_settings" string="Ajustes de cliente"
                    invisible="not is_customer" class="o_bold">
                    <field name="customer_number_reference" invisible="not parent_id" />
                    <field name="customer_need_purchase_order"
                        placeholder="¿Necesita orden de compra?" class="o_inline" />
                    <field name="customer_number_reference" placeholder="Número de referencia" />
                    <field name="is_customer_foreign" placeholder="¿Cliente extranjero?" />
                    <field name="customer_down_motive" placeholder="Motivo de baja" />
                    <field name="customer_bday" placeholder="Fecha de nacimiento" />
                </group>

                <group string="Contacto" class="o_bold" invisible="not is_customer">
                    <field name="customer_sales_person_name" placeholder="Nombre contacto de ventas" />
                    <field name="customer_billing_person_name"
                        placeholder="Nombre contacto de cobranza" />
                    <field name="customer_sales_person_email"
                        placeholder="Correo electrónico de ventas" />
                    <field name="customer_billing_person_email"
                        placeholder="Correo electrónico de cobranza`" />
                    <field name="customer_foreign_email" placeholder="Correo electrónico foraneo" />
                </group>

                <group name="customer_accounting" string="Contrarecibo" class="o_bold"
                    invisible="not is_customer">
                    <field name="customer_counter_receipt" placeholder="¿Contrarecibo?" />
                    <field name="customer_counter_receipt_type"
                        invisible="not customer_counter_receipt" placeholder="Tipo de contrarecibo" />
                    <field name="customer_counter_receipt_days"
                        invisible="not customer_counter_receipt" widget="many2many_tags"
                        options="{'no_create': True}" domain="[('name', '!=', False)]"
                        placeholder="Días de contrarecibo" />
                    <field name="customer_counter_receipt_time_frame_start"
                        invisible="not customer_counter_receipt"
                        placeholder="Hora de inicio de contrarecibo" />
                    <field name="customer_counter_receipt_time_frame_end"
                        invisible="not customer_counter_receipt"
                        placeholder="Hora de fin de contrarecibo" />
                </group>

                <group string="Pagos" class="o_bold" invisible="not is_customer">
                    <field name="customer_receipt_invoice_conditions"
                        placeholder="Condiciones de recepción de factura" />
                    <field name="customer_payment_invoice_conditions"
                        placeholder="Condiciones de pago de factura" />
                    <field name="customer_payment_days" widget="many2many_tags"
                        options="{'no_create': True}" domain="[('name', '!=', False)]"
                        placeholder="Días de pago" />
                    <field name="customer_payment_time_frame_start"
                        placeholder="Hora de inicio de pago" />
                    <field name="customer_payment_time_frame_end"
                        placeholder="Hora de fin de pago" />
                </group>

                <group name="customer_tax" string="Impuestos" class="o_bold"
                    invisible="not is_customer">
                    <field name="customer_tax" placeholder="Impuesto" />
                    <field name="customer_tax_retention" placeholder="Retención de impuestos" />
                    <field name="customer_tax_isr_retention" placeholder="Retención de ISR" />
                    <field name="customer_cond_payment" placeholder="Condiciones de pago" />
                </group>

                <field name="can_see_accoounting" invisible="1" />
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="customer_sales_res_partner_credit_form_view">
        <field name="name">customer.sales.res.partner.credit.form.view</field>
        <field name="model">res.partner</field>
        <field name="priority">36</field>
        <field name="inherit_id" ref="account.view_partner_property_form" />
        <field name="arch" type="xml">

            <xpath expr="//page[@name='accounting']" position="attributes">
                <attribute name="invisible">
                    (not is_company and parent_id) or (not can_see_accoounting)
                </attribute>
            </xpath>

            <xpath expr="//group[@name='credit_limits']" position="after">
                <group name="customer_credit" string="Ajustes del credito">
                    <field name="customer_manual_suspend" />
                    <field name="customer_credit_suspend" placeholder="¿Suspender crédito?" readonly="customer_manual_suspend == False"/>
                    <field name="customer_credit_days" placeholder="Días de crédito" />
                    <field name="customer_credit_key" placeholder="Llave de crédito" />
                    
                </group>
                <group name="orders_limit" string="Importes adeudados">
                    <field name="orders_residual" placeholder="Ordenes por facturar" />
                    <field name="invoice_residual" placeholder="Facturas por cobrar" />
                    <field name="total_residual" placeholder="Total adeudado" />
                </group>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="customer_sales_res_partner_search_view">
        <field name="name">customer.sales.res.partner.search.view</field>
        <field name="model">res.partner</field>
        <field name="priority">36</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='parent_id']" position="after">
                <field name="commercial_name" filter_domain="[('commercial_name', 'ilike', self)]" />
                <field name="customer_number_reference"
                    filter_domain="[('customer_number_reference', 'ilike', self)]" />
            </xpath>
        </field>
    </record>
</odoo>
